name: Facebook AI Bot Auto-Setup
on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build-and-run:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 16

      - name: Unzip and Fix Dependencies
        run: |
          unzip bot.zip
          cd TatsuYTB || cd .
          npm install --production
          npm install uuid@8.3.2 axios fca-horizon-remastered
          cp ../appstate.json .

      - name: Start Bot with Logging
        run: |
          cd TatsuYTB || cd .
          echo "ğŸš€ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø¢Ù†..."
          # ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª Ù…Ø¹ Ø¥Ø¬Ø¨Ø§Ø± Ø¥Ø®Ø±Ø§Ø¬ Ø§Ù„Ø³Ø¬Ù„Ø§Øª ÙÙˆØ±Ø§Ù‹
          node index.js & sleep 60 && kill $! || true
